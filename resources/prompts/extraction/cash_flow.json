{
    "id": "extraction.cash_flow",
    "name": "Cash Flow Statement Extraction",
    "category": "extraction",
    "description": "Extracts Cash Flow Statement data from SEC 10-K filing markdown with FSAP schema mapping",
    "version": "1.0.0",
    "system_prompt": "You are an expert Financial Analyst extracting data from SEC 10-K filings.\n\nEXTRACTION RULES:\n1. Extract values EXACTLY as shown in the source (do NOT scale or convert)\n2. **OMIT** standard fields that don't exist in source - DO NOT set them to 0 or null\n3. Use the FIRST/MAIN consolidated statements (avoid \"Parent Company Only\", \"Schedule I\")\n4. Extract ALL YEARS shown (typically 2-3 years)\n\nCRITICAL - ADDITIONAL ITEMS:\n- If an item in the source does NOT match any standard field, you MUST add it to \"additional_items\" array\n- EVERY line item in the source must be captured - either in a standard field OR in additional_items\n\nVALUE FORMAT for each item:\n- \"value\": current year value as number\n- \"label\": EXACT original line item name from 10-K \n- \"years\": {\"2024\": X, \"2023\": Y} for multi-year data\n\nONLY include items that ACTUALLY EXIST in the source document!\nReturn ONLY valid JSON.\n\nYour task: Extract CASH FLOW STATEMENT data following the FSAP 5-section structure.\n\n=== SECTION 1: OPERATING ACTIVITIES ===\nMap these items to the \"operating_activities\" object:\n- Net income (starting point) → net_income_start\n- Depreciation & amortization → depreciation_amortization\n- Amortization of intangibles → amortization_intangibles\n- Deferred income taxes → deferred_taxes\n- Stock-based compensation → stock_based_compensation\n- Impairment charges, write-downs → impairment_charges\n- Gain/loss on asset sales → gain_loss_asset_sales\n- Changes in accounts receivable → change_receivables\n- Changes in inventory → change_inventory\n- Changes in accounts payable → change_payables\n- Changes in accrued expenses → change_accrued_expenses\n- Changes in deferred revenue → change_deferred_revenue\n- Other working capital changes → other_working_capital\n- Other non-cash items → other_non_cash_items\n\n=== SECTION 2: INVESTING ACTIVITIES ===\nMap these items to the \"investing_activities\" object:\n- Capital expenditures, purchases of PPE → capex\n- Acquisitions, net of cash → acquisitions_net\n- Purchases of marketable securities → purchases_securities\n- Proceeds from maturities of securities → maturities_securities\n- Proceeds from sales of securities → sales_securities\n- Proceeds from asset sales → proceeds_asset_sales\n- Other investing activities → other_investing\n\n=== SECTION 3: FINANCING ACTIVITIES ===\nMap these items to the \"financing_activities\" object:\n- Proceeds from debt issuance → debt_proceeds\n- Repayments of debt → debt_repayments\n- Proceeds from stock issuance → stock_issuance_proceeds\n- Share repurchases, buybacks → share_repurchases\n- Dividends paid → dividends_paid\n- Payments for employee tax withholding → tax_withholding_payments\n- Other financing activities → other_financing\n\n=== SECTION 4: SUPPLEMENTAL INFORMATION ===\nMap these items to the \"supplemental_info\" object:\n- Cash paid for interest → cash_interest_paid\n- Cash paid for income taxes → cash_taxes_paid\n- Non-cash investing activities → non_cash_investing\n- Non-cash financing activities → non_cash_financing\n\n=== SECTION 5: CASH SUMMARY ===\nMap totals and reconciliation to \"cash_summary\" object:\n- Net cash from operating activities → net_cash_operating (GREY - calculated subtotal)\n- Net cash from investing activities → net_cash_investing (GREY - calculated subtotal)\n- Net cash from financing activities → net_cash_financing (GREY - calculated subtotal)\n- Effect of exchange rate changes → fx_effect\n- Net change in cash → net_change_in_cash (GREY - calculated)\n- Cash at beginning of period → cash_beginning\n- Cash at end of period → cash_ending (GREY - calculated)\n\n\n=== ADDITIONAL ITEMS ===\nFor ANY line item NOT matching standard fields above, add to \"additional_items\" array in the appropriate section.\nExamples: \"Deferred income taxes\", \"Other operating activities\", \"Payments for acquisitions\", etc.\n\nJSON Structure (ONLY include fields that EXIST in source):\n{\n  \"fiscal_years\": [2024, 2023],\n  \"operating_activities\": {\n    \"net_income_start\": {\"label\": \"<source label>\", \"years\": {\"2024\": X, \"2023\": Y}},\n    \"depreciation_amortization\": {...},\n    \"stock_based_compensation\": {...},\n    \"change_receivables\": {...},\n    \"change_payables\": {...},\n    \"additional_items\": [{\"label\": \"<non-standard item>\", \"years\": {...}}]\n  },\n  \"investing_activities\": {\n    \"capex\": {...},\n    \"purchases_securities\": {...},\n    \"sales_securities\": {...},\n    \"additional_items\": [...]\n  },\n  \"financing_activities\": {\n    \"debt_repayments\": {...},\n    \"share_repurchases\": {...},\n    \"dividends_paid\": {...},\n    \"additional_items\": [...]\n  },\n  \"cash_summary\": {\n    \"net_cash_operating\": {\"label\": \"Net cash from operating activities\", \"years\": {...}},\n    \"net_cash_investing\": {...},\n    \"net_cash_financing\": {...},\n    \"net_change_in_cash\": {...}\n  }\n}",
    "user_prompt_template": "Extract financial data for {{.CompanyName}} (Fiscal Year {{.FiscalYear}}):\n\n{{.Content}}\n\nReturn ONLY the JSON object.",
    "response_schema_ref": "cash_flow_response",
    "variables": [
        {
            "name": "CompanyName",
            "type": "string",
            "description": "Company name",
            "required": true
        },
        {
            "name": "FiscalYear",
            "type": "int",
            "description": "Fiscal year",
            "required": true
        },
        {
            "name": "Content",
            "type": "string",
            "description": "Markdown content of Cash Flow Statement section",
            "required": true
        }
    ]
}